FROM node:18-alpine
WORKDIR /app

# GOOD ORDER: Copy dependency file first
COPY package.json .

# Install dependencies - cached if package.json unchanged
RUN npm install

# Copy application code last - changes don't invalidate npm install cache
COPY app.js .

EXPOSE 3000
CMD ["npm", "start"]
